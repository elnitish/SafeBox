<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeBox — Login</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --bg:#070a13; --panel: rgba(255,255,255,0.06); --panel-strong: rgba(255,255,255,0.12); --text:#e6eaf3; --muted:#a6b0c3; --primary:#6aa9ff; --primary-strong:#4d8dff; --accent:#7cf5c2; --success:#10b981; --ring: rgba(108,170,255,.35); --glow: 0 10px 30px rgba(106,169,255,.25);} 
        *{box-sizing:border-box} html,body{height:100%}
        body{margin:0;font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:radial-gradient(1200px 800px at 10% -10%, rgba(77,141,255,.15), transparent 60%),radial-gradient(900px 600px at 100% 0%, rgba(124,245,194,.12), transparent 60%),var(--bg)}
        a{color:inherit;text-decoration:none}
        .container{width:100%;max-width:1120px;margin:0 auto;padding:0 16px}
        .site-header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(140%) blur(8px);background:linear-gradient(180deg, rgba(7,10,19,.75), rgba(7,10,19,.35) 60%, transparent);border-bottom:1px solid rgba(255,255,255,.06)}
        .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 0}
        .brand{display:inline-flex;align-items:center;gap:10px;font-weight:800}
        .brand-mark{display:grid;place-items:center;width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--primary-strong),#2a6bff);box-shadow:var(--glow)}
        .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;font-weight:600;color:var(--text);background:var(--panel);border:1px solid rgba(255,255,255,.08);transition:transform .15s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease}
        .btn:hover{transform:translateY(-1px);box-shadow:var(--glow);border-color:rgba(255,255,255,.14)}
        .btn-primary{background:linear-gradient(135deg,var(--primary),var(--primary-strong));border-color:transparent}
        .layout{display:grid;gap:18px;grid-template-columns: 1.05fr .95fr;max-width:980px;margin:36px auto;padding:0 16px}
        @media (max-width: 900px){.layout{grid-template-columns:1fr;}}
        .panel{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));border:1px solid rgba(255,255,255,.14);border-radius:16px;padding:22px}
        .title{margin:0 0 8px;font-size:28px}
        .subtitle{margin:0 0 16px;color:var(--muted)}
        .form-group{margin-bottom:14px}
        .form-label{display:block;margin-bottom:6px;color:var(--muted)}
        .form-input{width:100%;padding:12px 12px;border:1px solid rgba(255,255,255,.18);border-radius:10px;background:rgba(255,255,255,.04);color:var(--text)}
        .wallet-display{font-family: ui-monospace, SFMono-Regular, Menlo, monospace}
        .divider{text-align:center;margin:14px 0;color:var(--muted)}
        .features{display:grid;gap:10px}
        .feature{display:flex;gap:10px;align-items:center;padding:12px;border-radius:12px;background:var(--panel);border:1px solid rgba(255,255,255,.12)}
        .reveal{opacity:0;transform:translateY(8px);animation:reveal .5s ease forwards}
        @keyframes reveal{to{opacity:1;transform:none}}
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <nav class="nav" aria-label="Primary">
                <a class="brand" href="/"><span class="brand-mark"><i class="fa-solid fa-vault" style="color:#fff"></i></span><span>SafeBox</span></a>
                <a href="/getStarted" class="btn"><i class="fa-solid fa-rocket"></i> Get Started</a>
            </nav>
        </div>
    </header>

    <main>
        <div class="layout">
            <section class="panel reveal" aria-labelledby="login-title">
                <h1 class="title" id="login-title">Welcome back</h1>
                <p class="subtitle">Connect your wallet to access your secure decentralized storage</p>

                <div id="statusMessage" style="display:none" class="subtitle"></div>

                <form action="/login" method="post" id="loginForm">
                    <div class="form-group">
                        <button type="button" id="connectBtn" class="btn" onclick="connectWallet()"><i class="fab fa-ethereum"></i> Connect MetaMask</button>
                    </div>
                    <div class="form-group">
                        <label for="walletDisplay" class="form-label">Wallet Address</label>
                        <input type="text" name="address" id="walletDisplay" class="form-input wallet-display" placeholder="Click 'Connect MetaMask' to fetch your wallet address" readonly>
                    </div>
                    <div class="divider">or</div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary" id="loginBtn" disabled><i class="fas fa-right-to-bracket"></i> Login to SafeBox</button>
                    </div>
                </form>

                <div><a href="/" class="btn"><i class="fas fa-arrow-left"></i> Back to Home</a></div>
            </section>

            <aside class="panel reveal" aria-label="Highlights">
                <div class="brand" style="margin-bottom:8px"><span class="brand-mark"><i class="fa-solid fa-vault" style="color:#fff"></i></span><span>SafeBox</span></div>
                <p class="subtitle">Secure. Decentralized. Yours.</p>
                <div class="features">
                    <div class="feature"><i class="fas fa-shield-alt" style="color:var(--accent)"></i><span>End‑to‑end encryption</span></div>
                    <div class="feature"><i class="fas fa-network-wired" style="color:var(--accent)"></i><span>IPFS decentralized storage</span></div>
                    <div class="feature"><i class="fas fa-link" style="color:var(--accent)"></i><span>Blockchain metadata</span></div>
                    <div class="feature"><i class="fas fa-globe" style="color:var(--accent)"></i><span>Global access</span></div>
                </div>
            </aside>
        </div>
    </main>

    <script>
        let button = document.getElementById("connectBtn");
        let loginBtn = document.getElementById("loginBtn");
        let statusMessage = document.getElementById("statusMessage");
        button.addEventListener("click", async function (e) { e.preventDefault(); });
        function showStatus(message, type) {
            statusMessage.textContent = message;
            statusMessage.style.display = 'block';
            statusMessage.style.color = type === 'success' ? '#34d399' : '#f87171';
        }
        async function connectWallet() {
            if (window.ethereum) {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const walletAddress = accounts[0];
                    document.getElementById("walletDisplay").value = walletAddress;
                    loginBtn.disabled = false;
                    showStatus("Wallet connected successfully!", "success");
                    button.innerHTML = '<i class="fas fa-check"></i> Connected';
                } catch (error) { console.error("Error connecting to MetaMask:", error); showStatus("Failed to connect wallet. Please try again.", "error"); }
            } else { showStatus("MetaMask is not installed. Please install MetaMask to proceed.", "error"); }
        }
        document.getElementById("loginForm").addEventListener("submit", function(e) {
            const walletAddress = document.getElementById("walletDisplay").value;
            if (!walletAddress || walletAddress === "Click 'Connect MetaMask' to fetch your wallet address") { e.preventDefault(); showStatus("Please connect your MetaMask wallet first.", "error"); }
        });
        window.addEventListener('load', async function() {
            if (window.ethereum) {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                    if (accounts.length > 0) { const walletAddress = accounts[0]; document.getElementById("walletDisplay").value = walletAddress; loginBtn.disabled = false; button.innerHTML = '<i class="fas fa-check"></i> Connected'; }
                } catch (error) { console.error("Error checking MetaMask connection:", error); }
            }
        });
    </script>
</body>
</html>
